<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="res_check_form_view" model="ir.ui.view">
            <field name="name">check_in_check_out_app.res_check.form</field>
            <field name="model">res.check</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button string="Check In" name="action_check_in"

                                attrs="{'invisible':[('state','!=','draft')]}"

                                type='object' class="btn-primary"/>
                        <button string="Check Out" class="btn-primary"

                                attrs="{'invisible':[('state','!=','checkin')]}"


                                name="action_check_out" type="object"/>
                        <button string="Cancel" class="btn-primary" name="action_cancel"

                                attrs="{'invisible':[('state','!=','draft')]}"

                                type="object"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,checkin,checkout"/>

                    </header>
                    <sheet>


                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"></field>
                            </h1>

                            <field name="time_status" invisible="1"></field>
                            <span class="badge badge-success" attrs="{'invisible':[('time_status','!=','upcoming')]}">
                                Upcoming
                            </span>

                            <span class="badge badge-danger" attrs="{'invisible':[('time_status','!=','overdue')]}">
                                Overdue
                            </span>
                            <span class="badge badge-warning" attrs="{'invisible':[('time_status','!=','today')]}">
                                Today
                            </span>
                            <span class="badge badge-info" attrs="{'invisible':[('time_status','!=','completed')]}">
                                Completed
                            </span>


                        </div>


                        <group>


                            <group string="Partner">
                                <!--                                                    <field name="time_status"></field>-->

                                <field name="partner_id" attrs="{'readonly':[('state','!=','draft')]}"
                                       widget="res_partner_many2one"
                                       context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'show_vat': True}"
                                       options="{&quot;always_reload&quot;: True, 'no_create': True, 'no_create_edit':True}"/>

                            </group>
                            <group string="Tracking">
                                <field name="planed_date" attrs="{'readonly':[('state','!=','draft')]}"></field>
                                <field name="check_in" readonly="1"></field>
                                <field name="check_out" readonly="1"></field>

                            </group>
                        </group>
                        <group>
                            <group string="Sales Person">
                                <field name="user_id" readonly="1"></field>
                                <field name="company_id" readonly="1"></field>


                            </group>
                            <group string="Description">
                                <field name="note"></field>
                            </group>

                        </group>
                        <!--                        <notebook>-->
                        <!--                            <page string="Description">-->
                        <!--                                <field name="note"></field>-->

                        <!--                            </page>-->
                        <!--                        </notebook>-->
                    </sheet>
                </form>
            </field>
        </record>

        <record id="res_check_tree_view" model="ir.ui.view">
            <field name="name">check_in_check_out_app.res_check.tree</field>
            <field name="model">res.check</field>
            <field name="arch" type="xml">
                <tree decoration-danger="time_status == 'overdue'" decoration-warning="time_status == 'today'"
                      decoration-success="time_status == 'completed'" decoration-primary="time_status == 'upcoming'">
                    <field name="partner_id"></field>
                    <field name="user_id"></field>
                    <field name="planed_date"></field>
                    <field name="check_in"></field>
                    <field name="check_out"></field>
                    <field name="state"></field>
                    <field name="time_status" invisible="1"></field>

                </tree>
            </field>
        </record>


        <record id="res_check_view_leads" model="ir.ui.view">
            <field name="name">res.check.kanban.lead</field>
            <field name="model">res.check</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="partner_id"></field>
                    <field name="user_id"></field>
                    <field name="planed_date"></field>
                    <field name="check_in"></field>
                    <field name="check_out"></field>
                    <field name="state"></field>
                    <field name="time_status"></field>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="container">
                                    <div class="row">
                                        <div class="col">
                                            <field name="name"></field>
                                        </div>
                                        <div>
                                            <figure class="figure">
                                                <figcaption class="figure-caption">
                                                    Customer :
                                                    <field name="partner_id"/>
                                                </figcaption>
                                            </figure>
                                            <br/>
                                            <div class="text-warning">
                                                <i class="fa fa-calendar"/>
                                                <field name="planed_date"/>
                                            </div>
                                            <div class="text-info">
                                                <i class="fa fa-sign-in"/>
                                                <field name="check_in"/>
                                            </div>
                                            <div class="text-danger">
                                                <i class="fa fa-sign-out"/>
                                                <field name="check_out"/>
                                            </div>
                                            <div></div>
                                        </div>
                                    </div>
                                </div>
                                <field name="time_status" invisible="1"/>
                                <div class="progress" attrs="{'invisible': [('time_status','!=','completed')]}">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 100%"
                                         aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"/>
                                </div>
                                <div class="progress" attrs="{'invisible': [('time_status','!=','overdue')]}">
                                    <div class="progress-bar bg-danger" role="progressbar" style="width: 100%"
                                         aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"/>
                                </div>
                                <div class="progress" attrs="{'invisible': [('time_status','!=','upcoming')]}">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 100%"
                                         aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"/>
                                </div>
                                <div class="progress" attrs="{'invisible': [('time_status','!=','today')]}">
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 100%"
                                         aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"/>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <!--        <record id="res_check_search_view" model="ir.ui.view">-->
        <!--            <field name="name">check_in_check_out_app.res_check.search</field>-->
        <!--            <field name="model">res_check</field>-->
        <!--            <field name="arch" type="xml">-->
        <!--                <search string="ModelTitle">-->
        <!--                    <group expand="1" string="Group By">-->
        <!--                        <filter string="Example Field" name="example_field" domain="[]"-->
        <!--                                context="{'group_by':'example_field'}"/>-->
        <!--                    </group>-->
        <!--                </search>-->
        <!--            </field>-->
        <!--        </record>-->

        <record id="res_check_root_act_window" model="ir.actions.act_window">
            <field name="name">Check IN/Check Out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.check</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('user_id', '=', uid)]</field>

            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    There is no examples click here to add new check in / check out record.
                </p>
            </field>
        </record>


        <record id="res_check_search_view" model="ir.ui.view">
            <field name="name">res_check_search</field>
            <field name="model">res.check</field>
            <field name="arch" type="xml">
                <search string="ModelTitle">
                    <field name="partner_id"></field>
                    <field name="user_id"></field>
                    <field name="planed_date"></field>
                    <field name="check_in"></field>
                    <field name="check_out"></field>
                    <field name="state"></field>
                    <field name="time_status"></field>
                    <group expand="1" string="Group By">
                        <filter string="Customer " name="partner_id" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter string="Sales Person " name="user_id" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter string="Planned Date " name="planed_date" domain="[]"
                                context="{'group_by':'planed_date'}"/>
                        <filter string="Status " name="state" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="My Visit" name="user_id" domain="[('user_id', '=', uid)]"/>
                        <separator/>
                        <filter string="Pending" name="status_draft" domain="[('state', 'in', ['draft','checkin'])]"/>
                        <filter string="Visited" name="status_checkout" domain="[('state', '=', 'checkout')]"/>
                        <filter string="Cancelled" name="status_cancel" domain="[('state', '=', 'cancel')]"/>
                        <separator/>
                    </group>
                </search>
            </field>
        </record>


        <record id="res_check_my_act_window" model="ir.actions.act_window">
            <field name="name">My Check IN/Check Out</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.check</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('user_id', '=', uid)]</field>

            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    There is no examples click here to add new check in / check out record.
                </p>
            </field>
        </record>


        <record id="res_check_my_act_window" model="ir.actions.act_window">
            <field name="name">Pending</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.check</field>
            <field name="view_mode">tree,kanban,form,search</field>
            <field name="domain">[('user_id', '=', uid),('state','in',['draft','checkin'])]</field>

            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    There is no examples click here to add new check in / check out record.
                </p>
            </field>
        </record>


        <menuitem
                id="root_menuitem_res_check"
                name="Check In/Out"
                action="res_check_root_act_window"

        />
        <menuitem
                id="main_menuitem_res_Check"
                name="Check In/Out"
                parent="root_menuitem_res_check"
                action="res_check_root_act_window"
                sequence="2"
        />


        <menuitem
                id="main_menuitem_my_pending"
                name="My Check In/Out"
                parent="main_menuitem_res_Check"
                action="res_check_root_act_window"
                sequence="1"
        />

        <menuitem
                id="main_menuitem_my_own_checkin"
                name="Pending"
                parent="main_menuitem_res_Check"
                action="res_check_my_act_window"
                sequence="2"
        />


        <record id="res_check_my_all_window" model="ir.actions.act_window">
            <field name="name">Report</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.check</field>
            <field name="view_mode">tree,form</field>

            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    There is no examples click here to add new check in / check out record.
                </p>
            </field>
        </record>


        <menuitem
                id="all_check_in_checkout"
                name="Report"
                parent="root_menuitem_res_check"
                action="res_check_my_all_window"
                sequence="2"
                groups="check_in_check_out_app.group_check_in_tracker_restriction_admin"
        />

    </data>
</odoo>